{% extends "AppBundle::layout.html.twig" %}

{% block content %}
    <h1>Список рецептов</h1>

    <a href="{{ path('create') }}">Новый рецепт</a>

    <div class="search">
        <input id="js-search" type="text" placeholder="cтрока поиска" value="" autofocus="autofocus">
        <button type="button" class="btn btn-default">Поиск</button>
    </div>

    <table class="table table-bordered">
        <thead>
        <tr>
            <th>ID</th>
            <th>Название</th>
            <th>Описание</th>
            <th>Действия</th>
        </tr>
        </thead>
        <tbody>
        {% for recipe in recipes %}
            <tr>
                <td>{{ recipe.id }}</td>
                <td>{{ recipe.name }}</td>
                <td>{{ recipe.description }}</td>
                <td>
                    <a href="{{ path('view', {id: recipe.id }) }}">Просмотреть</a>
                    <a href="{{ path('edit', {id: recipe.id }) }}">Редактировать</a>
                    <a href="{{ path('delete', {id: recipe.id }) }}">Удалить</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block js %}
    <script>

        $(document).ready(function () {
            var find = function () {
                var search = $('#js-search').val();

                location.href = window.location.pathname + '?' + 'search=' + search;
            };

            $('.search button').on('click', function () {
                find();
            });

            $('#js-search').on('keypress', function (e) {
                if (e.keyCode == 13) {
                    find();
                }
            });
        });

    </script>
{% endblock %}